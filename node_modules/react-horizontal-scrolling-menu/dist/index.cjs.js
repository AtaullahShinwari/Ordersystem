"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("react"));!function(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],l=document.createElement("style");l.type="text/css","top"===r&&n.firstChild?n.insertBefore(l,n.firstChild):n.appendChild(l),l.styleSheet?l.styleSheet.cssText=e:l.appendChild(document.createTextNode(e))}}(".react-horizontal-scrolling-menu--wrapper {\n  display: flex;\n}\n\n.react-horizontal-scrolling-menu--scroll-container {\n  display: flex;\n  height: max-content;\n  overflow-y: hidden;\n  position: relative;\n  width: 100%;\n}\n\n:export {\n  wrapper: react-horizontal-scrolling-menu--wrapper;\n  container: react-horizontal-scrolling-menu--scroll-container;\n}\n");const r="react-horizontal-scrolling-menu",n=`${r}--separator`,l=`${r}--item`,i=`${r}--scroll-container`,o=`${r}--wrapper`,s="itemId";var a=Object.freeze({__proto__:null,rootClassName:r,separatorClassName:n,itemClassName:l,scrollContainerClassName:i,wrapperClassName:o,id:s});function u({children:e,onScroll:r=(()=>{}),scrollRef:n}){return t.default.createElement("div",{className:i,onScroll:r,ref:n},e)}var d=t.default.memo((function({id:e,index:r,refs:l}){const i=t.default.useRef(null);return l[r]=i,t.default.createElement("div",{className:n,"data-key":e,"data-index":r,ref:i})}));var c=t.default.memo((function({children:e,id:r,index:n,refs:i}){const o=t.default.useRef(null);return i[n]=o,t.default.createElement("div",{className:l,"data-key":r,"data-index":n,ref:o},e)}));function f({children:e,refs:r}){const n=t.default.Children.toArray(e).filter(Boolean),l=n.length;return t.default.createElement(t.default.Fragment,null,n.map(((e,n)=>{var i,o;const a=null===(o=null===(i=e)||void 0===i?void 0:i.props)||void 0===o?void 0:o[s],u=a+"-separator",f=n+1===l;return[t.default.createElement(c,{id:a,key:"menuItem__"+a,refs:r,index:n},e),!f&&t.default.createElement(d,{id:u,refs:r,key:u,index:n+.1})]})))}function v(e,t="smooth",r="end",n="nearest"){e&&window&&window.requestAnimationFrame((()=>e.scrollIntoView({block:n,behavior:t,inline:r})))}function m({items:e,itemsChanged:r,refs:n,options:l}){const i=t.default.useRef(),[o,s]=t.default.useState([]),a=t.default.useRef(+setTimeout((()=>{}),0)),u=t.default.useCallback((t=>{const r=function(e,t){return[...e].map((e=>{var r,n;const l=e.target,i=(null===(r=null==l?void 0:l.dataset)||void 0===r?void 0:r.key)||"";return[i,{index:String((null===(n=null==l?void 0:l.dataset)||void 0===n?void 0:n.index)||""),key:i,entry:e,visible:e.intersectionRatio>=t.ratio}]}))}(t,l);e.set(r),global.clearTimeout(a.current),a.current=+setTimeout((()=>global.requestAnimationFrame((()=>{s((t=>{const r=e.getVisible().map((e=>e[1].key));return JSON.stringify(t)!==JSON.stringify(r)?r:t}))}))),l.throttle)}),[e,l]);return t.default.useLayoutEffect((()=>{const e=(e=>Object.values(e).map((e=>e.current)).filter(Boolean))(n),t=i.current||new IntersectionObserver(u,l);return i.current=t,e.forEach((e=>t.observe(e))),()=>{clearTimeout(a.current),t.disconnect(),i.current=void 0}}),[u,r,l,n]),{visibleItems:o}}class p extends Map{toArr(){return[...this]}onlyDigits(e){return String(e).replace(/[^0-9.]/g,"")}sort(e){return e.sort(((e,t)=>+this.onlyDigits(e[1].index)-+this.onlyDigits(t[1].index)))}set(e,t){return Array.isArray(e)?this.sort(e).forEach((e=>{super.set(e[0],e[1])})):super.set(e,t),this}first(){var e;return null===(e=this.toArr()[0])||void 0===e?void 0:e[1]}last(){var e,t;return null===(t=null===(e=this.toArr().slice(-1))||void 0===e?void 0:e[0])||void 0===t?void 0:t[1]}filter(e){return this.toArr().filter(e)}find(e){return this.toArr().find(e)}findIndex(e){return this.toArr().findIndex(e)}prev(e){var t;const r=this.toArr(),n=r.findIndex((t=>t[0]===e||t[1]===e));return-1!==n?null===(t=r[n-1])||void 0===t?void 0:t[1]:void 0}next(e){var t;const r=this.toArr(),n=r.findIndex((t=>t[0]===e||t[1]===e));return-1!==n?null===(t=r[n+1])||void 0===t?void 0:t[1]:void 0}getVisible(){return this.filter((e=>e[1].visible))}}const h={ratio:.9,rootMargin:"5px",threshold:[.05,.5,.75,.95],throttle:100},g=t.default.createContext({});exports.ScrollMenu=function({LeftArrow:e,RightArrow:r,children:n,onInit:l=(()=>{}),onMouseDown:i,onMouseUp:a,onMouseMove:d,onScroll:c=(()=>{}),onWheel:y=(()=>{}),options:b=h,wrapperClassName:x=""}){const I=t.default.useRef(null),[C]=t.default.useState({}),E=t.default.useMemo((()=>Object.assign(Object.assign(Object.assign({},h),b),{root:I.current})),[b,I.current]),S=function(e,r){const[n,l]=t.default.useState("");return t.default.useLayoutEffect((()=>{const r=(e?t.default.Children.toArray(e):[]).map((e=>{var t,r;return null===(r=null===(t=e)||void 0===t?void 0:t.props)||void 0===r?void 0:r[s]})).filter(Boolean).join("");l(r)}),[e,r]),n}(n,C),w=t.default.useRef(new p).current,{visibleItems:A}=m({items:w,itemsChanged:S,options:E,refs:C}),N=t.default.useRef({}),M=function(e=(()=>{})){const[r,n]=t.default.useState(!1);return t.default.useLayoutEffect((()=>{r||(n(!0),e())}),[e,r]),r}((()=>l(N.current))),k=Boolean(M&&!!A.length),O=t.default.useMemo((()=>function(e,t=[]){var r,n;const l=t.filter((e=>!/separator/.test(String(e)))),i=!!(null===(r=e.first())||void 0===r?void 0:r.visible),o=!!(null===(n=e.last())||void 0===n?void 0:n.visible),s=t=>{var r;return null===(r=e.find((e=>e[1].key===String(t))))||void 0===r?void 0:r[1]},a=()=>{var t,r;return e.prev(null===(r=null===(t=e.getVisible())||void 0===t?void 0:t[0])||void 0===r?void 0:r[1])},u=()=>{var t,r,n,l;return e.next(null===(l=null===(n=null===(r=null===(t=e.getVisible())||void 0===t?void 0:t.slice)||void 0===r?void 0:r.call(t,-1))||void 0===n?void 0:n[0])||void 0===l?void 0:l[1])};return{getItemById:s,getItemByIndex:t=>{var r;return null===(r=e.find((e=>String(e[1].index)===String(t))))||void 0===r?void 0:r[1]},getNextItem:u,getPrevItem:a,isFirstItemVisible:i,isItemVisible:e=>{var t;return null===(t=s(e))||void 0===t?void 0:t.visible},isLastItem:t=>e.last()===s(t),isLastItemVisible:o,scrollNext:(e="smooth",t="start",r="nearest")=>{var n,l;return v(null===(l=null===(n=u())||void 0===n?void 0:n.entry)||void 0===l?void 0:l.target,e,t,r)},scrollPrev:(e="smooth",t="end",r="nearest")=>{var n,l;return v(null===(l=null===(n=a())||void 0===n?void 0:n.entry)||void 0===l?void 0:l.target,e,t,r)},scrollToItem:v,visibleItemsWithoutSeparators:l}}(w,A)),[w,A]);N.current=t.default.useMemo((()=>Object.assign(Object.assign({},O),{initComplete:k,items:w,scrollContainer:I,visibleItems:A})),[O,k,w,A]);const R=t.default.useCallback((e=>c(N.current,e)),[c,N]),V=t.default.useCallback((e=>y(N.current,e)),[y,N]),j=t.default.isValidElement(e)&&e||"function"==typeof e&&t.default.createElement(e,null)||null,B=t.default.isValidElement(r)&&r||"function"==typeof r&&t.default.createElement(r,null)||null;return t.default.createElement("div",{className:`${o} ${x}`,onWheel:V,onMouseDown:null==i?void 0:i(N.current),onMouseUp:null==a?void 0:a(N.current),onMouseMove:null==d?void 0:d(N.current)},t.default.createElement(g.Provider,{value:N.current},j,t.default.createElement(u,{onScroll:R,scrollRef:I},t.default.createElement(f,{refs:C},n)),B))},exports.VisibilityContext=g,exports.constants=a;
