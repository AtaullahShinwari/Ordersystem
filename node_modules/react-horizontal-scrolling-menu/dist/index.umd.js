!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["react-horizontal-scrolling-menu"]={},e.React)}(this,(function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=n(t);!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".react-horizontal-scrolling-menu--wrapper {\n  display: flex;\n}\n\n.react-horizontal-scrolling-menu--scroll-container {\n  display: flex;\n  height: max-content;\n  overflow-y: hidden;\n  position: relative;\n  width: 100%;\n}\n\n:export {\n  wrapper: react-horizontal-scrolling-menu--wrapper;\n  container: react-horizontal-scrolling-menu--scroll-container;\n}\n");const i="react-horizontal-scrolling-menu",l=`${i}--separator`,o=`${i}--item`,a=`${i}--scroll-container`,s=`${i}--wrapper`,u="itemId";var d=Object.freeze({__proto__:null,rootClassName:i,separatorClassName:l,itemClassName:o,scrollContainerClassName:a,wrapperClassName:s,id:u});function c({children:e,onScroll:t=(()=>{}),scrollRef:n}){return r.default.createElement("div",{className:a,onScroll:t,ref:n},e)}var f=r.default.memo((function({id:e,index:t,refs:n}){const i=r.default.useRef(null);return n[t]=i,r.default.createElement("div",{className:l,"data-key":e,"data-index":t,ref:i})}));var v=r.default.memo((function({children:e,id:t,index:n,refs:i}){const l=r.default.useRef(null);return i[n]=l,r.default.createElement("div",{className:o,"data-key":t,"data-index":n,ref:l},e)}));function m({children:e,refs:t}){const n=r.default.Children.toArray(e).filter(Boolean),i=n.length;return r.default.createElement(r.default.Fragment,null,n.map(((e,n)=>{var l,o;const a=null===(o=null===(l=e)||void 0===l?void 0:l.props)||void 0===o?void 0:o[u],s=a+"-separator",d=n+1===i;return[r.default.createElement(v,{id:a,key:"menuItem__"+a,refs:t,index:n},e),!d&&r.default.createElement(f,{id:s,refs:t,key:s,index:n+.1})]})))}function p(e,t="smooth",n="end",r="nearest"){e&&window&&window.requestAnimationFrame((()=>e.scrollIntoView({block:r,behavior:t,inline:n})))}function h({items:e,itemsChanged:t,refs:n,options:i}){const l=r.default.useRef(),[o,a]=r.default.useState([]),s=r.default.useRef(+setTimeout((()=>{}),0)),u=r.default.useCallback((t=>{const n=function(e,t){return[...e].map((e=>{var n,r;const i=e.target,l=(null===(n=null==i?void 0:i.dataset)||void 0===n?void 0:n.key)||"";return[l,{index:String((null===(r=null==i?void 0:i.dataset)||void 0===r?void 0:r.index)||""),key:l,entry:e,visible:e.intersectionRatio>=t.ratio}]}))}(t,i);e.set(n),global.clearTimeout(s.current),s.current=+setTimeout((()=>global.requestAnimationFrame((()=>{a((t=>{const n=e.getVisible().map((e=>e[1].key));return JSON.stringify(t)!==JSON.stringify(n)?n:t}))}))),i.throttle)}),[e,i]);return r.default.useLayoutEffect((()=>{const e=(e=>Object.values(e).map((e=>e.current)).filter(Boolean))(n),t=l.current||new IntersectionObserver(u,i);return l.current=t,e.forEach((e=>t.observe(e))),()=>{clearTimeout(s.current),t.disconnect(),l.current=void 0}}),[u,t,i,n]),{visibleItems:o}}class g extends Map{toArr(){return[...this]}onlyDigits(e){return String(e).replace(/[^0-9.]/g,"")}sort(e){return e.sort(((e,t)=>+this.onlyDigits(e[1].index)-+this.onlyDigits(t[1].index)))}set(e,t){return Array.isArray(e)?this.sort(e).forEach((e=>{super.set(e[0],e[1])})):super.set(e,t),this}first(){var e;return null===(e=this.toArr()[0])||void 0===e?void 0:e[1]}last(){var e,t;return null===(t=null===(e=this.toArr().slice(-1))||void 0===e?void 0:e[0])||void 0===t?void 0:t[1]}filter(e){return this.toArr().filter(e)}find(e){return this.toArr().find(e)}findIndex(e){return this.toArr().findIndex(e)}prev(e){var t;const n=this.toArr(),r=n.findIndex((t=>t[0]===e||t[1]===e));return-1!==r?null===(t=n[r-1])||void 0===t?void 0:t[1]:void 0}next(e){var t;const n=this.toArr(),r=n.findIndex((t=>t[0]===e||t[1]===e));return-1!==r?null===(t=n[r+1])||void 0===t?void 0:t[1]:void 0}getVisible(){return this.filter((e=>e[1].visible))}}const y={ratio:.9,rootMargin:"5px",threshold:[.05,.5,.75,.95],throttle:100},b=r.default.createContext({});e.ScrollMenu=function({LeftArrow:e,RightArrow:t,children:n,onInit:i=(()=>{}),onMouseDown:l,onMouseUp:o,onMouseMove:a,onScroll:d=(()=>{}),onWheel:f=(()=>{}),options:v=y,wrapperClassName:x=""}){const I=r.default.useRef(null),[C]=r.default.useState({}),E=r.default.useMemo((()=>Object.assign(Object.assign(Object.assign({},y),v),{root:I.current})),[v,I.current]),S=function(e,t){const[n,i]=r.default.useState("");return r.default.useLayoutEffect((()=>{const t=(e?r.default.Children.toArray(e):[]).map((e=>{var t,n;return null===(n=null===(t=e)||void 0===t?void 0:t.props)||void 0===n?void 0:n[u]})).filter(Boolean).join("");i(t)}),[e,t]),n}(n,C),w=r.default.useRef(new g).current,{visibleItems:A}=h({items:w,itemsChanged:S,options:E,refs:C}),N=r.default.useRef({}),M=function(e=(()=>{})){const[t,n]=r.default.useState(!1);return r.default.useLayoutEffect((()=>{t||(n(!0),e())}),[e,t]),t}((()=>i(N.current))),k=Boolean(M&&!!A.length),R=r.default.useMemo((()=>function(e,t=[]){var n,r;const i=t.filter((e=>!/separator/.test(String(e)))),l=!!(null===(n=e.first())||void 0===n?void 0:n.visible),o=!!(null===(r=e.last())||void 0===r?void 0:r.visible),a=t=>{var n;return null===(n=e.find((e=>e[1].key===String(t))))||void 0===n?void 0:n[1]},s=()=>{var t,n;return e.prev(null===(n=null===(t=e.getVisible())||void 0===t?void 0:t[0])||void 0===n?void 0:n[1])},u=()=>{var t,n,r,i;return e.next(null===(i=null===(r=null===(n=null===(t=e.getVisible())||void 0===t?void 0:t.slice)||void 0===n?void 0:n.call(t,-1))||void 0===r?void 0:r[0])||void 0===i?void 0:i[1])};return{getItemById:a,getItemByIndex:t=>{var n;return null===(n=e.find((e=>String(e[1].index)===String(t))))||void 0===n?void 0:n[1]},getNextItem:u,getPrevItem:s,isFirstItemVisible:l,isItemVisible:e=>{var t;return null===(t=a(e))||void 0===t?void 0:t.visible},isLastItem:t=>e.last()===a(t),isLastItemVisible:o,scrollNext:(e="smooth",t="start",n="nearest")=>{var r,i;return p(null===(i=null===(r=u())||void 0===r?void 0:r.entry)||void 0===i?void 0:i.target,e,t,n)},scrollPrev:(e="smooth",t="end",n="nearest")=>{var r,i;return p(null===(i=null===(r=s())||void 0===r?void 0:r.entry)||void 0===i?void 0:i.target,e,t,n)},scrollToItem:p,visibleItemsWithoutSeparators:i}}(w,A)),[w,A]);N.current=r.default.useMemo((()=>Object.assign(Object.assign({},R),{initComplete:k,items:w,scrollContainer:I,visibleItems:A})),[R,k,w,A]);const j=r.default.useCallback((e=>d(N.current,e)),[d,N]),O=r.default.useCallback((e=>f(N.current,e)),[f,N]),V=r.default.isValidElement(e)&&e||"function"==typeof e&&r.default.createElement(e,null)||null,T=r.default.isValidElement(t)&&t||"function"==typeof t&&r.default.createElement(t,null)||null;return r.default.createElement("div",{className:`${s} ${x}`,onWheel:O,onMouseDown:null==l?void 0:l(N.current),onMouseUp:null==o?void 0:o(N.current),onMouseMove:null==a?void 0:a(N.current)},r.default.createElement(b.Provider,{value:N.current},V,r.default.createElement(c,{onScroll:j,scrollRef:I},r.default.createElement(m,{refs:C},n)),T))},e.VisibilityContext=b,e.constants=d,Object.defineProperty(e,"__esModule",{value:!0})}));
