import e from"react";!function(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===r&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".react-horizontal-scrolling-menu--wrapper {\n  display: flex;\n}\n\n.react-horizontal-scrolling-menu--scroll-container {\n  display: flex;\n  height: max-content;\n  overflow-y: hidden;\n  position: relative;\n  width: 100%;\n}\n\n:export {\n  wrapper: react-horizontal-scrolling-menu--wrapper;\n  container: react-horizontal-scrolling-menu--scroll-container;\n}\n");const t="react-horizontal-scrolling-menu",r=`${t}--separator`,n=`${t}--item`,i=`${t}--scroll-container`,o=`${t}--wrapper`,l="itemId";var s=Object.freeze({__proto__:null,rootClassName:t,separatorClassName:r,itemClassName:n,scrollContainerClassName:i,wrapperClassName:o,id:l});function a({children:t,onScroll:r=(()=>{}),scrollRef:n}){return e.createElement("div",{className:i,onScroll:r,ref:n},t)}var u=e.memo((function({id:t,index:n,refs:i}){const o=e.useRef(null);return i[n]=o,e.createElement("div",{className:r,"data-key":t,"data-index":n,ref:o})}));var d=e.memo((function({children:t,id:r,index:i,refs:o}){const l=e.useRef(null);return o[i]=l,e.createElement("div",{className:n,"data-key":r,"data-index":i,ref:l},t)}));function c({children:t,refs:r}){const n=e.Children.toArray(t).filter(Boolean),i=n.length;return e.createElement(e.Fragment,null,n.map(((t,n)=>{var o,s;const a=null===(s=null===(o=t)||void 0===o?void 0:o.props)||void 0===s?void 0:s[l],c=a+"-separator",v=n+1===i;return[e.createElement(d,{id:a,key:"menuItem__"+a,refs:r,index:n},t),!v&&e.createElement(u,{id:c,refs:r,key:c,index:n+.1})]})))}function v(e,t="smooth",r="end",n="nearest"){e&&window&&window.requestAnimationFrame((()=>e.scrollIntoView({block:n,behavior:t,inline:r})))}function m({items:t,itemsChanged:r,refs:n,options:i}){const o=e.useRef(),[l,s]=e.useState([]),a=e.useRef(+setTimeout((()=>{}),0)),u=e.useCallback((e=>{const r=function(e,t){return[...e].map((e=>{var r,n;const i=e.target,o=(null===(r=null==i?void 0:i.dataset)||void 0===r?void 0:r.key)||"";return[o,{index:String((null===(n=null==i?void 0:i.dataset)||void 0===n?void 0:n.index)||""),key:o,entry:e,visible:e.intersectionRatio>=t.ratio}]}))}(e,i);t.set(r),global.clearTimeout(a.current),a.current=+setTimeout((()=>global.requestAnimationFrame((()=>{s((e=>{const r=t.getVisible().map((e=>e[1].key));return JSON.stringify(e)!==JSON.stringify(r)?r:e}))}))),i.throttle)}),[t,i]);return e.useLayoutEffect((()=>{const e=(e=>Object.values(e).map((e=>e.current)).filter(Boolean))(n),t=o.current||new IntersectionObserver(u,i);return o.current=t,e.forEach((e=>t.observe(e))),()=>{clearTimeout(a.current),t.disconnect(),o.current=void 0}}),[u,r,i,n]),{visibleItems:l}}class f extends Map{toArr(){return[...this]}onlyDigits(e){return String(e).replace(/[^0-9.]/g,"")}sort(e){return e.sort(((e,t)=>+this.onlyDigits(e[1].index)-+this.onlyDigits(t[1].index)))}set(e,t){return Array.isArray(e)?this.sort(e).forEach((e=>{super.set(e[0],e[1])})):super.set(e,t),this}first(){var e;return null===(e=this.toArr()[0])||void 0===e?void 0:e[1]}last(){var e,t;return null===(t=null===(e=this.toArr().slice(-1))||void 0===e?void 0:e[0])||void 0===t?void 0:t[1]}filter(e){return this.toArr().filter(e)}find(e){return this.toArr().find(e)}findIndex(e){return this.toArr().findIndex(e)}prev(e){var t;const r=this.toArr(),n=r.findIndex((t=>t[0]===e||t[1]===e));return-1!==n?null===(t=r[n-1])||void 0===t?void 0:t[1]:void 0}next(e){var t;const r=this.toArr(),n=r.findIndex((t=>t[0]===e||t[1]===e));return-1!==n?null===(t=r[n+1])||void 0===t?void 0:t[1]:void 0}getVisible(){return this.filter((e=>e[1].visible))}}const p={ratio:.9,rootMargin:"5px",threshold:[.05,.5,.75,.95],throttle:100},h=e.createContext({});function g({LeftArrow:t,RightArrow:r,children:n,onInit:i=(()=>{}),onMouseDown:s,onMouseUp:u,onMouseMove:d,onScroll:g=(()=>{}),onWheel:y=(()=>{}),options:b=p,wrapperClassName:x=""}){const I=e.useRef(null),[C]=e.useState({}),E=e.useMemo((()=>Object.assign(Object.assign(Object.assign({},p),b),{root:I.current})),[b,I.current]),w=function(t,r){const[n,i]=e.useState("");return e.useLayoutEffect((()=>{const r=(t?e.Children.toArray(t):[]).map((e=>{var t,r;return null===(r=null===(t=e)||void 0===t?void 0:t.props)||void 0===r?void 0:r[l]})).filter(Boolean).join("");i(r)}),[t,r]),n}(n,C),S=e.useRef(new f).current,{visibleItems:A}=m({items:S,itemsChanged:w,options:E,refs:C}),N=e.useRef({}),M=function(t=(()=>{})){const[r,n]=e.useState(!1);return e.useLayoutEffect((()=>{r||(n(!0),t())}),[t,r]),r}((()=>i(N.current))),k=Boolean(M&&!!A.length),R=e.useMemo((()=>function(e,t=[]){var r,n;const i=t.filter((e=>!/separator/.test(String(e)))),o=!!(null===(r=e.first())||void 0===r?void 0:r.visible),l=!!(null===(n=e.last())||void 0===n?void 0:n.visible),s=t=>{var r;return null===(r=e.find((e=>e[1].key===String(t))))||void 0===r?void 0:r[1]},a=()=>{var t,r;return e.prev(null===(r=null===(t=e.getVisible())||void 0===t?void 0:t[0])||void 0===r?void 0:r[1])},u=()=>{var t,r,n,i;return e.next(null===(i=null===(n=null===(r=null===(t=e.getVisible())||void 0===t?void 0:t.slice)||void 0===r?void 0:r.call(t,-1))||void 0===n?void 0:n[0])||void 0===i?void 0:i[1])};return{getItemById:s,getItemByIndex:t=>{var r;return null===(r=e.find((e=>String(e[1].index)===String(t))))||void 0===r?void 0:r[1]},getNextItem:u,getPrevItem:a,isFirstItemVisible:o,isItemVisible:e=>{var t;return null===(t=s(e))||void 0===t?void 0:t.visible},isLastItem:t=>e.last()===s(t),isLastItemVisible:l,scrollNext:(e="smooth",t="start",r="nearest")=>{var n,i;return v(null===(i=null===(n=u())||void 0===n?void 0:n.entry)||void 0===i?void 0:i.target,e,t,r)},scrollPrev:(e="smooth",t="end",r="nearest")=>{var n,i;return v(null===(i=null===(n=a())||void 0===n?void 0:n.entry)||void 0===i?void 0:i.target,e,t,r)},scrollToItem:v,visibleItemsWithoutSeparators:i}}(S,A)),[S,A]);N.current=e.useMemo((()=>Object.assign(Object.assign({},R),{initComplete:k,items:S,scrollContainer:I,visibleItems:A})),[R,k,S,A]);const O=e.useCallback((e=>g(N.current,e)),[g,N]),V=e.useCallback((e=>y(N.current,e)),[y,N]),j=e.isValidElement(t)&&t||"function"==typeof t&&e.createElement(t,null)||null,B=e.isValidElement(r)&&r||"function"==typeof r&&e.createElement(r,null)||null;return e.createElement("div",{className:`${o} ${x}`,onWheel:V,onMouseDown:null==s?void 0:s(N.current),onMouseUp:null==u?void 0:u(N.current),onMouseMove:null==d?void 0:d(N.current)},e.createElement(h.Provider,{value:N.current},j,e.createElement(a,{onScroll:O,scrollRef:I},e.createElement(c,{refs:C},n)),B))}export{g as ScrollMenu,h as VisibilityContext,s as constants};
